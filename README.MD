<h1 align="center">Solid Grab&Top</h1>

![logo](https://user-images.githubusercontent.com/103274228/183367172-afaaafbe-6c44-4ed2-beb7-6fc07f4fa632.png)

<h2 align="center">Описание</h2>

Solid Grab&Top - это программа на языке Python, которая собирает сообщения из Телеграм канала или чата, готовит шаблон поста со статистикой по нескольким параметрам (таким как топ комментирующих пользователей, топ использованных слов и результаты викторин) и отправляет его в выбранный диалог.

Пример вывода результата:

![image](https://user-images.githubusercontent.com/103274228/183378148-04b1d8ab-1bce-414b-925d-644b7b2b208a.png)

Скрипт написан на языке Python 3 и использует несколько дополнительных модулей, таких как Telethon, Pymorph2 и NLTK. SGT написан в ООП стиле группой студентов (команда Фуксий) в качестве нашего первого опыта как в командной работе, так и в работе с асинхронными библиотеками, причем и то и другое было достаточно серьезным испытанием :)

<h2 align="center">Сборка репозитория и локальный запуск</h2>

Выполните в консоли:

```
git clone https://github.com/obulygin/tg_stat_fuxy.git
pip install -r requirements.txt
```

<h2 align="center">Авторизация</h2>

Авторизационная информация хранится в файле settings.ini в следующем виде:

```
api_id = 
api_hash =
phone =
```

**Инструкция по получению авторизационных данных и заполнению файла settings.ini.**

1. Перейдите по ссылке https://my.telegram.org/auth и введите номер телефона привязанный к вашему телеграм аккаунту (его же нужно будет прописать в 'phone' файла settings.ini).

2. После подтверждения перейдите в 'API development tools'.

![image](https://user-images.githubusercontent.com/103274228/183370341-c7b32c6d-4420-431c-a02e-8a8f8ba921f1.png)

3. Заполните поля 'App title' и 'Short name' (названия могут быть любыми).

![image](https://user-images.githubusercontent.com/103274228/183371641-a4c9c1de-ed5e-4bf1-a457-517b37f8ebe2.png)

4. После заполнения и сохранения, в полях 'App api_id' и 'App api_hash' появятся данные, которые нужно скопировать в api_id и api_hash файла settings.ini соответственно.

![image](https://user-images.githubusercontent.com/103274228/183373955-3edaae6e-9092-4895-9658-362760fc3fef.png)

Итоговый пример заполнения файла settings.ini:

```
api_id = 12345678
api_hash = 12qwer12345q12qw2we456r123q45r2w
phone = +12345678945
```

Вы можете открыть для заполнения файл settings.ini в любом редакторе (например, в Блокноте).

<h2 align="center">Запуск</h2>

Чтобы запустить программу, выполните в консоли:

```
python main.py
```

При первом запуске программа попросит ввести Ваш номер телефона, после чего Телеграм пришлет на него код-подтверждение, который также будет необходимо ввести. После этого в папке с программой будет создан файл с расширением .session и до тех пор, пока он будет находиться в папке, Вам больше не придется проходить процедуру авторизации.

Далее для работы с программой по стандартному сценарию просто следуйте выводимым инструкциям. Скрипт покажет Вам Ваши Телеграм каналы и чаты и предложит выбрать один. После чего в Ваш диалог Избранное (Saved Messages) будет отправлен шаблон со статистикой, который Вы сможете при необходимости подкорректировать и переслать в Ваш чат или канал.

Для персонализации периода для подготовки статистики Вы можете добавить количество дней в строку 15 файла main.py (7 дней по умолчанию).

```
week_stats = WeekStats(client, 30)
```

<h2 align="center">Для разработчиков</h2>

Схема работы программы:

![schema](https://user-images.githubusercontent.com/103274228/183367957-69d9ba3d-5946-40c0-8cf0-a4a4a14110c1.png)

